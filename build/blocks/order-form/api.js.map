{"version":3,"file":"blocks/order-form/api.js","mappings":";;;;;AAAAA,QAAQ,CAACC,gBAAgB,CAAC,kBAAkB,EAAE,MAAM;EAClD,MAAMC,MAAM,GAAG,wDAAwD;EAEvE,MAAMC,SAAS,GAAGH,QAAQ,CAACI,cAAc,CAAC,gBAAgB,CAAC;EAC3D,MAAMC,SAAS,GAAGL,QAAQ,CAACM,aAAa,CAAC,mBAAmB,CAAC;EAC7D,MAAMC,aAAa,GAAGP,QAAQ,CAACI,cAAc,CAAC,wBAAwB,CAAC;EACvE,MAAMI,QAAQ,GAAGR,QAAQ,CAACI,cAAc,CAAC,gBAAgB,CAAC;EAC1D,MAAMK,WAAW,GAAGT,QAAQ,CAACM,aAAa,CAAC,uBAAuB,CAAC;EACnE,MAAMI,cAAc,GAAGV,QAAQ,CAACI,cAAc,CAAC,mBAAmB,CAAC;EACnE,MAAMO,cAAc,GAAGX,QAAQ,CAACM,aAAa,CAC3C,iDAAiD,CAClD;EAED,MAAMM,SAAS,GAAI;AACrB;AACA;AACA;AACA;AACA,GAAG;EAED,MAAMC,IAAI,GAAG,EAAE;EACf,MAAMC,MAAM,GAAG,KAAK;EACpB,IAAIC,MAAM,GAAG,CAAC;EAEd,IAAIC,UAAU,GAAG,IAAI;;EAErB;EACA,MAAMC,QAAQ,GAAGA,CAACC,EAAE,EAAEC,KAAK,KAAK;IAC9BN,IAAI,CAACK,EAAE,CAAC,GAAG;MACTC,KAAK,EAAEA,KAAK;MACZC,MAAM,EAAE,IAAI;MACZC,MAAM,EAAE,IAAI;MACZC,OAAO,EAAE,IAAI;MACbC,QAAQ,EAAE,IAAI;MACdC,QAAQ,EAAE,IAAI;MACdC,IAAI,EAAE,IAAI;MACVC,QAAQ,EAAE,IAAI;MACdC,OAAO,EAAE,IAAI;MACbC,SAAS,EAAE,IAAI;MACfC,UAAU,EAAE,IAAI;MAChBC,YAAY,EAAE,IAAI;MAClBC,UAAU,EAAE,KAAK;MACjBC,KAAK,EAAE;IACT,CAAC;EACH,CAAC;;EAED;EACA,MAAMC,iBAAiB,GAAGA,CAACd,KAAK,EAAED,EAAE,KAAK;IACvCC,KAAK,CAAClB,gBAAgB,CAAC,QAAQ,EAAE,MAAM;MACrCiC,SAAS,CAAChB,EAAE,CAAC;IACf,CAAC,CAAC;EACJ,CAAC;EAED,MAAMiB,WAAW,GAAIjB,EAAE,IAAK;IAC1BF,UAAU,GAAG,CAAC;IACdH,IAAI,CAACuB,OAAO,CAAEjB,KAAK,IAAK;MACtB,IAAIA,KAAK,KAAK,IAAI,IAAIA,KAAK,CAACE,MAAM,KAAK,IAAI,EAAE;QAC3C;MACF;MAEA,IAAIH,EAAE,IAAIA,EAAE,KAAKC,KAAK,CAACA,KAAK,CAACkB,YAAY,CAAC,SAAS,CAAC,EAAE;QACpDlB,KAAK,CAACC,MAAM,CAACkB,SAAS,GAAGxB,MAAM;MACjC;MAEA,MAAMyB,cAAc,GAAGpB,KAAK,CAACA,KAAK,CAACb,aAAa,CAAC,sBAAsB,CAAC;MAExE,IAAIiC,cAAc,CAACC,QAAQ,CAACC,MAAM,IAAI,CAAC,EAAE;QACvCF,cAAc,CAACD,SAAS,GAAG,EAAE;QAE7BnB,KAAK,CAACE,MAAM,CAACe,OAAO,CAAEM,SAAS,IAAK;UAClC,MAAMC,MAAM,GAAG3C,QAAQ,CAAC4C,aAAa,CAAC,QAAQ,CAAC;UAC/CD,MAAM,CAACE,KAAK,GAAGH,SAAS,CAACI,WAAW;UACpCH,MAAM,CAACL,SAAS,GAAI,GAAEI,SAAS,CAACK,aAAc,EAAC;UAC/CJ,MAAM,CAACK,YAAY,CAAC,WAAW,EAAEN,SAAS,CAACK,aAAa,CAAC;UACzDR,cAAc,CAACU,WAAW,CAACN,MAAM,CAAC;QACpC,CAAC,CAAC;MACJ;MAEA,MAAMnB,QAAQ,GAAGL,KAAK,CAACA,KAAK,CAACb,aAAa,CAAC,sBAAsB,CAAC,CAACuC,KAAK;MACxE,MAAMK,KAAK,GACT/B,KAAK,CAACE,MAAM,CAACkB,cAAc,CAACY,aAAa,CAAC,CAACC,UAAU,GAAG5B,QAAQ,GAChEL,KAAK,CAACE,MAAM,CAACkB,cAAc,CAACY,aAAa,CAAC,CAACE,SAAS;MAEtDC,UAAU,CAAC,MAAM;QACfnC,KAAK,CAACC,MAAM,CAACkB,SAAS,GAAI,GAAEiB,IAAI,CAACC,KAAK,CAACN,KAAK,CAAE,MAAK;MACrD,CAAC,EAAE,GAAG,CAAC;MAEP,IAAIO,KAAK,GAAGF,IAAI,CAACC,KAAK,CAACrC,KAAK,CAACS,SAAS,CAAC;MACvC,IAAI8B,MAAM,GAAGH,IAAI,CAACC,KAAK,CAACrC,KAAK,CAACU,UAAU,CAAC;MAEzCV,KAAK,CAACA,KAAK,CAACb,aAAa,CACvB,wBAAwB,CACzB,CAACgC,SAAS,GAAI,GAAEmB,KAAM,MAAKC,MAAO,KAAI;MAEvCvC,KAAK,CAACW,YAAY,GAChBX,KAAK,CAACE,MAAM,CAACkB,cAAc,CAACY,aAAa,CAAC,CAACC,UAAU;MACvDpC,UAAU,IAAIkC,KAAK;MACnB/B,KAAK,CAACI,QAAQ,GACZgB,cAAc,CAACA,cAAc,CAACY,aAAa,CAAC,CAACd,YAAY,CAAC,WAAW,CAAC;IAC1E,CAAC,CAAC;IACF9B,aAAa,CAAC+B,SAAS,GAAI,GAAEiB,IAAI,CAACC,KAAK,CAACxC,UAAU,CAAE,MAAK;EAC3D,CAAC;;EAED;EACA,MAAMkB,SAAS,GAAIhB,EAAE,IAAK;IACxB,MAAMC,KAAK,GAAGN,IAAI,CAACK,EAAE,CAAC,CAACC,KAAK;IAC5B,MAAMwC,SAAS,GAAGxC,KAAK,CAACb,aAAa,CAAC,kBAAkB,CAAC;IACzD,MAAMsD,aAAa,GAAGzC,KAAK,CAACb,aAAa,CAAC,sBAAsB,CAAC;IACjE,MAAMuD,aAAa,GAAG1C,KAAK,CAACb,aAAa,CAAC,sBAAsB,CAAC;IACjE,MAAMwD,UAAU,GAAG3C,KAAK,CAACb,aAAa,CAAC,oBAAoB,CAAC;;IAE5D;IACA,MAAMyD,kBAAkB,GAAGH,aAAa,CAACf,KAAK;IAC9C,MAAMmB,kBAAkB,GAAGH,aAAa,CAAChB,KAAK;;IAE9C;IACA,MAAMoB,iBAAiB,GACrBL,aAAa,CAACM,OAAO,CAACN,aAAa,CAACT,aAAa,CAAC,CAACgB,IAAI;;IAEzD;IACA,IAAI1C,IAAI,GAAG,IAAI;IACf,IAAIZ,IAAI,CAACK,EAAE,CAAC,CAACO,IAAI,IAAI,IAAI,EAAE;MACzB,IAAI,CAACkC,SAAS,CAACd,KAAK,EAAE;QACpBiB,UAAU,CAACxB,SAAS,GAAG,mBAAmB;QAC1C;MACF;MACAb,IAAI,GAAGkC,SAAS,CAACS,KAAK,CAAC,CAAC,CAAC;IAC3B,CAAC,MAAM;MACL3C,IAAI,GAAGZ,IAAI,CAACK,EAAE,CAAC,CAACO,IAAI;IACtB;;IAEA;IACA,IAAIuC,kBAAkB,GAAG,CAAC,IAAIA,kBAAkB,GAAG,GAAG,EAAE;MACtDF,UAAU,CAACxB,SAAS,GAAG,qCAAqC;MAC5D;IACF;IAEA,MAAM+B,QAAQ,GAAG5C,IAAI,CAAC6C,IAAI;IAC1B,MAAMhD,OAAO,GAAGG,IAAI,CAAC8C,YAAY,GAAGF,QAAQ;;IAE5C;IACAxD,IAAI,CAACK,EAAE,CAAC,CAACM,QAAQ,GAAGwC,kBAAkB;IAEtC,IAAInD,IAAI,CAACK,EAAE,CAAC,CAACI,OAAO,KAAKA,OAAO,EAAE;MAChCT,IAAI,CAACK,EAAE,CAAC,CAACE,MAAM,GAAG0C,UAAU;MAC5BjD,IAAI,CAACK,EAAE,CAAC,CAACK,QAAQ,GAAGwC,kBAAkB;MACtClD,IAAI,CAACK,EAAE,CAAC,CAACI,OAAO,GAAGA,OAAO;MAE1B,MAAMkD,IAAI,GAAG,IAAIC,QAAQ,EAAE;MAC3BD,IAAI,CAACE,MAAM,CAAC,UAAU,EAAEX,kBAAkB,CAAC;MAC3CS,IAAI,CAACE,MAAM,CAAC,QAAQ,EAAEV,kBAAkB,CAAC;MAEzC,IAAInD,IAAI,CAACK,EAAE,CAAC,CAACc,KAAK,IAAInB,IAAI,CAACK,EAAE,CAAC,CAACQ,QAAQ,KAAK,IAAI,EAAE;QAChD8C,IAAI,CAACE,MAAM,CAAC,MAAM,EAAE7D,IAAI,CAACK,EAAE,CAAC,CAACQ,QAAQ,CAAC;MACxC,CAAC,MAAM;QACL8C,IAAI,CAACE,MAAM,CAAC,UAAU,EAAEjD,IAAI,EAAE4C,QAAQ,CAAC;MACzC;MAEAP,UAAU,CAACxB,SAAS,GAAGxB,MAAM;MAE7B6D,KAAK,CAACzE,MAAM,EAAE;QACZ0E,MAAM,EAAE,MAAM;QACdC,IAAI,EAAEL;MACR,CAAC,CAAC,CACCM,IAAI,CAAEC,QAAQ,IAAK;QAClB,IAAIA,QAAQ,CAACC,EAAE,EAAE;UACf,OAAOD,QAAQ,CAACE,IAAI,EAAE;QACxB;QACA,OAAOF,QAAQ,CAACE,IAAI,EAAE,CAACH,IAAI,CAAEX,IAAI,IAAK;UACpC,MAAM,IAAIe,KAAK,CAACf,IAAI,CAACgB,OAAO,CAAC;QAC/B,CAAC,CAAC;MACJ,CAAC,CAAC,CACDL,IAAI,CAAEM,MAAM,IAAK;QAChBvE,IAAI,CAACK,EAAE,CAAC,CAACG,MAAM,GAAG+D,MAAM,CAAC/D,MAAM;QAC/BR,IAAI,CAACK,EAAE,CAAC,CAACmE,cAAc,GAAGD,MAAM,CAAC/D,MAAM;QACvCR,IAAI,CAACK,EAAE,CAAC,CAACQ,QAAQ,GAAG0D,MAAM,CAACE,SAAS;QACpCzE,IAAI,CAACK,EAAE,CAAC,CAACS,OAAO,GAAGyD,MAAM,CAACG,SAAS;QACnC1E,IAAI,CAACK,EAAE,CAAC,CAACU,SAAS,GAAGwD,MAAM,CAACI,WAAW;QACvC3E,IAAI,CAACK,EAAE,CAAC,CAACW,UAAU,GAAGuD,MAAM,CAACK,YAAY;QACzC5E,IAAI,CAACK,EAAE,CAAC,CAACO,IAAI,GAAGA,IAAI;QACpBZ,IAAI,CAACK,EAAE,CAAC,CAACc,KAAK,GAAG,IAAI;QACrB,IAAI,CAACnB,IAAI,CAACK,EAAE,CAAC,CAACC,KAAK,EAAE;UACnB;UACAN,IAAI,CAACK,EAAE,CAAC,CAACa,UAAU,GAAG,IAAI;QAC5B;QACAI,WAAW,CAACjB,EAAE,CAAC;MACjB,CAAC,CAAC,CACDwE,KAAK,CAAEC,KAAK,IAAK;QAChBC,OAAO,CAACC,GAAG,CAACF,KAAK,CAAC;QAClB7B,UAAU,CAACxB,SAAS,GAAGqD,KAAK;QAC5B9E,IAAI,CAACK,EAAE,CAAC,CAACI,OAAO,GAAG,IAAI;QACvBT,IAAI,CAACK,EAAE,CAAC,CAACc,KAAK,GAAG,KAAK;MACxB,CAAC,CAAC;MACJ;IACF;IAEAnB,IAAI,CAACK,EAAE,CAAC,CAACK,QAAQ,GAAGwC,kBAAkB;IACtC5B,WAAW,CAACjB,EAAE,CAAC;IACfL,IAAI,CAACK,EAAE,CAAC,CAACc,KAAK,GAAG,IAAI;EACvB,CAAC;EAED,MAAM8D,UAAU,GAAI5E,EAAE,IAAK;IACzB,MAAM6E,QAAQ,GAAG/F,QAAQ,CAAC4C,aAAa,CAAC,KAAK,CAAC;IAC9CmD,QAAQ,CAACC,SAAS,CAACC,GAAG,CAAC,kBAAkB,CAAC;IAC1CF,QAAQ,CAACG,OAAO,CAAChF,EAAE,GAAI,GAAEA,EAAG,EAAC;;IAE7B;IACA,MAAMiF,SAAS,GAAGnG,QAAQ,CAAC4C,aAAa,CAAC,KAAK,CAAC;IAC/CuD,SAAS,CAACH,SAAS,CAACC,GAAG,CAAC,kBAAkB,EAAE,uBAAuB,CAAC;IACpE,MAAMG,QAAQ,GAAGpG,QAAQ,CAAC4C,aAAa,CAAC,KAAK,CAAC;IAC9CwD,QAAQ,CAACJ,SAAS,CAACC,GAAG,CAAC,kBAAkB,CAAC;IAC1CG,QAAQ,CAAC9D,SAAS,GAAG,QAAQ;IAC7B,MAAM+D,cAAc,GAAGrG,QAAQ,CAAC4C,aAAa,CAAC,OAAO,CAAC;IACtDyD,cAAc,CAACL,SAAS,CAACC,GAAG,CAC1B,uBAAuB,EACvB,iCAAiC,CAClC;IACDI,cAAc,CAACrD,YAAY,CAAC,KAAK,EAAG,mBAAkB9B,EAAG,EAAC,CAAC;IAC3DmF,cAAc,CAAC/D,SAAS,GAAG,UAAU;IACrC,MAAMgE,cAAc,GAAGtG,QAAQ,CAAC4C,aAAa,CAAC,OAAO,CAAC;IACtD0D,cAAc,CAACtD,YAAY,CAAC,IAAI,EAAG,mBAAkB9B,EAAG,EAAC,CAAC;IAC1DoF,cAAc,CAACN,SAAS,CAACC,GAAG,CAAC,iBAAiB,CAAC;IAC/CK,cAAc,CAACtD,YAAY,CAAC,MAAM,EAAE,MAAM,CAAC;IAC3CsD,cAAc,CAACtD,YAAY,CAAC,MAAM,EAAG,QAAO9B,EAAG,EAAC,CAAC;IACjDoF,cAAc,CAACtD,YAAY,CAAC,UAAU,EAAE,IAAI,CAAC;IAC7CsD,cAAc,CAACrG,gBAAgB,CAAC,QAAQ,EAAGsG,KAAK,IAAK;MACnD,MAAM9E,IAAI,GAAG8E,KAAK,CAACC,MAAM,CAACpC,KAAK,CAAC,CAAC,CAAC;MAClC,MAAMC,QAAQ,GAAG5C,IAAI,CAAC6C,IAAI;MAC1B+B,cAAc,CAAC/D,SAAS,GAAG+B,QAAQ;IACrC,CAAC,CAAC;IACF8B,SAAS,CAAClD,WAAW,CAACmD,QAAQ,CAAC;IAC/BD,SAAS,CAAClD,WAAW,CAACoD,cAAc,CAAC;IACrCF,SAAS,CAAClD,WAAW,CAACqD,cAAc,CAAC;;IAErC;IACA,MAAMG,aAAa,GAAGzG,QAAQ,CAAC4C,aAAa,CAAC,KAAK,CAAC;IACnD6D,aAAa,CAACT,SAAS,CAACC,GAAG,CAAC,kBAAkB,EAAE,qBAAqB,CAAC;IACtE,MAAMS,kBAAkB,GAAG1G,QAAQ,CAAC4C,aAAa,CAAC,OAAO,CAAC;IAC1D8D,kBAAkB,CAACV,SAAS,CAACC,GAAG,CAAC,kBAAkB,CAAC;IACpDS,kBAAkB,CAAC1D,YAAY,CAAC,KAAK,EAAG,YAAW9B,EAAG,EAAC,CAAC;IACxDwF,kBAAkB,CAACpE,SAAS,GAAG,UAAU;IACzC,MAAMqE,mBAAmB,GAAG3G,QAAQ,CAAC4C,aAAa,CAAC,QAAQ,CAAC;IAC5D+D,mBAAmB,CAACX,SAAS,CAACC,GAAG,CAC/B,qBAAqB,EACrB,mBAAmB,CACpB;IACDU,mBAAmB,CAAC3D,YAAY,CAAC,MAAM,EAAG,YAAW9B,EAAG,EAAC,CAAC;IAC1D;IACA,MAAM0F,yBAAyB,GAAG5G,QAAQ,CAAC4C,aAAa,CAAC,QAAQ,CAAC;IAClEgE,yBAAyB,CAACtE,SAAS,GAAG,aAAa;IACnDsE,yBAAyB,CAAC5D,YAAY,CAAC,OAAO,EAAE,EAAE,CAAC;IACnD2D,mBAAmB,CAAC1D,WAAW,CAAC2D,yBAAyB,CAAC;IAC1DH,aAAa,CAACxD,WAAW,CAACyD,kBAAkB,CAAC;IAC7CD,aAAa,CAACxD,WAAW,CAAC0D,mBAAmB,CAAC;;IAE9C;IACA,MAAME,aAAa,GAAG7G,QAAQ,CAAC4C,aAAa,CAAC,KAAK,CAAC;IACnDiE,aAAa,CAAC7D,YAAY,CAAC,UAAU,EAAE,IAAI,CAAC;IAC5C6D,aAAa,CAACb,SAAS,CAACC,GAAG,CAAC,kBAAkB,EAAE,qBAAqB,CAAC;IACtE,MAAMa,kBAAkB,GAAG9G,QAAQ,CAAC4C,aAAa,CAAC,OAAO,CAAC;IAC1DkE,kBAAkB,CAACd,SAAS,CAACC,GAAG,CAAC,kBAAkB,CAAC;IACpDa,kBAAkB,CAAC9D,YAAY,CAAC,KAAK,EAAG,YAAW9B,EAAG,EAAC,CAAC;IACxD4F,kBAAkB,CAACxE,SAAS,GAAG,WAAW;IAC1C,MAAMyE,kBAAkB,GAAG/G,QAAQ,CAAC4C,aAAa,CAAC,OAAO,CAAC;IAC1DmE,kBAAkB,CAACf,SAAS,CAACC,GAAG,CAC9B,qBAAqB,EACrB,mBAAmB,CACpB;IACDc,kBAAkB,CAAC/D,YAAY,CAAC,MAAM,EAAG,YAAW9B,EAAG,EAAC,CAAC;IACzD6F,kBAAkB,CAAC/D,YAAY,CAAC,MAAM,EAAE,QAAQ,CAAC;IACjD+D,kBAAkB,CAAC/D,YAAY,CAAC,UAAU,EAAE,IAAI,CAAC;IACjD+D,kBAAkB,CAAC/D,YAAY,CAAC,KAAK,EAAE,CAAC,CAAC;IACzC+D,kBAAkB,CAAC/D,YAAY,CAAC,KAAK,EAAE,GAAG,CAAC;IAC3C+D,kBAAkB,CAAC/D,YAAY,CAAC,OAAO,EAAE,CAAC,CAAC;IAC3C6D,aAAa,CAAC5D,WAAW,CAAC6D,kBAAkB,CAAC;IAC7CD,aAAa,CAAC5D,WAAW,CAAC8D,kBAAkB,CAAC;;IAE7C;IACA,MAAMC,WAAW,GAAGhH,QAAQ,CAAC4C,aAAa,CAAC,KAAK,CAAC;IACjDoE,WAAW,CAAChB,SAAS,CAACC,GAAG,CAAC,yBAAyB,EAAE,qBAAqB,CAAC;IAC3E,MAAMgB,qBAAqB,GAAGjH,QAAQ,CAAC4C,aAAa,CAAC,KAAK,CAAC;IAC3DqE,qBAAqB,CAACjB,SAAS,CAACC,GAAG,CAAC,uBAAuB,CAAC;IAC5DgB,qBAAqB,CAAC3E,SAAS,GAAG,GAAG;IACrC,MAAM4E,gBAAgB,GAAGlH,QAAQ,CAAC4C,aAAa,CAAC,KAAK,CAAC;IACtDsE,gBAAgB,CAAClB,SAAS,CAACC,GAAG,CAAC,mBAAmB,CAAC;IACnDiB,gBAAgB,CAAC5E,SAAS,GAAG,GAAG;IAChC0E,WAAW,CAAC/D,WAAW,CAACgE,qBAAqB,CAAC;IAC9CD,WAAW,CAAC/D,WAAW,CAACiE,gBAAgB,CAAC;;IAEzC;IACA,MAAMC,gBAAgB,GAAGnH,QAAQ,CAAC4C,aAAa,CAAC,KAAK,CAAC;IACtDuE,gBAAgB,CAACnB,SAAS,CAACC,GAAG,CAAC,kBAAkB,CAAC;IAClD,MAAMmB,WAAW,GAAGpH,QAAQ,CAAC4C,aAAa,CAAC,QAAQ,CAAC;IACpDwE,WAAW,CAAClB,OAAO,CAAChF,EAAE,GAAI,GAAEA,EAAG,EAAC;IAChCkG,WAAW,CAACpB,SAAS,CAACC,GAAG,CAAC,yBAAyB,CAAC;IACpDmB,WAAW,CAACpE,YAAY,CAAC,MAAM,EAAE,QAAQ,CAAC;IAC1CoE,WAAW,CAAC9E,SAAS,GAAG1B,SAAS;IACjCuG,gBAAgB,CAAClE,WAAW,CAACmE,WAAW,CAAC;IAEzCrB,QAAQ,CAAC9C,WAAW,CAACkD,SAAS,CAAC;IAC/BJ,QAAQ,CAAC9C,WAAW,CAACwD,aAAa,CAAC;IACnCV,QAAQ,CAAC9C,WAAW,CAAC4D,aAAa,CAAC;IACnCd,QAAQ,CAAC9C,WAAW,CAAC+D,WAAW,CAAC;IACjCjB,QAAQ,CAAC9C,WAAW,CAACkE,gBAAgB,CAAC;IAEtChH,SAAS,CAACkH,YAAY,CAACtB,QAAQ,EAAEtF,WAAW,CAAC;IAE7C2G,WAAW,CAACnH,gBAAgB,CAAC,OAAO,EAAGsG,KAAK,IAAK;MAC/C,MAAMrF,EAAE,GAAGqF,KAAK,CAACe,aAAa,CAACpB,OAAO,CAAChF,EAAE;MACzCL,IAAI,CAACK,EAAE,CAAC,GAAG,IAAI;MACfb,SAAS,CAACkH,UAAU,CAACC,WAAW,CAACzB,QAAQ,CAAC;MAE1C,MAAM0B,UAAU,GAAG5G,IAAI,CAAC6G,MAAM,CAAEC,IAAI,IAAKA,IAAI,KAAK,IAAI,CAAC;MACvD,MAAMC,WAAW,GAAGH,UAAU,CAACI,GAAG,EAAE;MACpC9G,MAAM,GAAGF,IAAI,CAACiH,OAAO,CAACF,WAAW,CAAC;IACpC,CAAC,CAAC;IACF,OAAO7B,QAAQ;EACjB,CAAC;EAED,MAAMgC,IAAI,GAAGA,CAAA,KAAM;IACjB9G,QAAQ,CAAC,CAAC,EAAEZ,SAAS,CAAC;IACtB4B,iBAAiB,CAAC5B,SAAS,EAAE,CAAC,CAAC;IAC/BK,cAAc,CAACT,gBAAgB,CAAC,QAAQ,EAAGsG,KAAK,IAAK;MACnD,MAAM9E,IAAI,GAAG8E,KAAK,CAACC,MAAM,CAACpC,KAAK,CAAC,CAAC,CAAC;MAClC,MAAMC,QAAQ,GAAG5C,IAAI,CAAC6C,IAAI;MAC1B3D,cAAc,CAAC2B,SAAS,GAAG+B,QAAQ;IACrC,CAAC,CAAC;EACJ,CAAC;EAED0D,IAAI,EAAE;EAEN,MAAMC,eAAe,GAAGA,CAAA,KAAM;IAC5B,MAAMC,YAAY,GAAGpH,IAAI,CAACE,MAAM,CAAC,CAACI,KAAK;IACvC,MAAM+G,gBAAgB,GAAGD,YAAY,CAAC3H,aAAa,CAAC,kBAAkB,CAAC;IAEvE,IAAI,CAAC4H,gBAAgB,CAAC9D,KAAK,CAAC,CAAC,CAAC,EAAE;IAEhCrD,MAAM,EAAE;IACR,IAAIgF,QAAQ,GAAGD,UAAU,CAAC/E,MAAM,CAAC;IACjCE,QAAQ,CAACF,MAAM,EAAEgF,QAAQ,CAAC;IAC1B9D,iBAAiB,CAAC8D,QAAQ,EAAEhF,MAAM,CAAC;EACrC,CAAC;;EAED;EACAP,QAAQ,CAACP,gBAAgB,CAAC,OAAO,EAAE,MAAM+H,eAAe,EAAE,CAAC;EAE3D7H,SAAS,CAACF,gBAAgB,CAAC,QAAQ,EAAE,MAAOsG,KAAK,IAAK;IACpDA,KAAK,CAAC4B,cAAc,EAAE;IACtB,MAAMC,QAAQ,GAAG,IAAI3D,QAAQ,CAACtE,SAAS,CAAC;IAExCkI,UAAU,GAAGxH,IAAI,CAAC6G,MAAM,CAAEC,IAAI,IAAKA,IAAI,KAAK,IAAI,CAAC;IAEjDU,UAAU,CAACjG,OAAO,CAAC,CAACuF,IAAI,EAAEW,KAAK,KAAK;MAClC,IAAIX,IAAI,EAAE;QACR,MAAM;UAAE7F,YAAY;UAAEP;QAAS,CAAC,GAAGoG,IAAI;QACvCS,QAAQ,CAAC1D,MAAM,CAAE,YAAW4D,KAAM,EAAC,EAAE/G,QAAQ,CAAC;QAC9C6G,QAAQ,CAAC1D,MAAM,CAAE,SAAQ4D,KAAM,EAAC,EAAExG,YAAY,CAAC;MACjD;IACF,CAAC,CAAC;IAEF,IAAI;MACF,MAAMiD,QAAQ,GAAG,MAAMJ,KAAK,CAAC4D,QAAQ,CAACC,IAAI,EAAE;QAC1C5D,MAAM,EAAE,MAAM;QACd;QACAC,IAAI,EAAEuD,QAAQ;QACdK,OAAO,EAAE;UACP;UACA,YAAY,EAAEF,QAAQ,CAACG;QACzB;MACF,CAAC,CAAC;MACF,IAAI3D,QAAQ,CAACC,EAAE,EAAE;QACf,MAAMnE,IAAI,GAAG,MAAMkE,QAAQ,CAACE,IAAI,EAAE;QAClC,MAAM0D,WAAW,GAAG9H,IAAI,CAAC,cAAc,CAAC;QACxCV,SAAS,CAACyI,KAAK,EAAE;QACjBC,QAAQ,CAACC,OAAO,CAACH,WAAW,CAAC;MAC/B,CAAC,MAAM;QACL/C,OAAO,CAACC,GAAG,CAAC,QAAQ,EAAEd,QAAQ,CAAC3D,MAAM,CAAC;MACxC;IACF,CAAC,CAAC,OAAOuE,KAAK,EAAE;MACdC,OAAO,CAACC,GAAG,CAAC,QAAQ,EAAEF,KAAK,CAAC;IAC9B;EACF,CAAC,CAAC;EAEFxF,SAAS,CAACyI,KAAK,EAAE;AACnB,CAAC,CAAC,C","sources":["webpack://wp-mos-blocks/./src/blocks/order-form/api.js"],"sourcesContent":["document.addEventListener(\"DOMContentLoaded\", () => {\n  const apiUrl = \"https://lasercut.internetguru.io/api/v2/analyze?id=mos\";\n\n  const orderForm = document.getElementById(\"mos-order-form\");\n  const formGroup = document.querySelector(\".order-form-group\");\n  const totalPriceElm = document.getElementById(\"order-form-total-price\");\n  const addGroup = document.getElementById(\"order-form-add\");\n  const beforeGroup = document.querySelector(\".order-form-add-group\");\n  const firstFileInput = document.getElementById(\"order-form-file-0\");\n  const firstFileLabel = document.querySelector(\n    \".form-subscribe-button[for='order-form-file-0']\"\n  );\n\n  const closeIcon = `\n    <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n      <path d=\"M6 18L18 6\" stroke-width=\"1.5\" stroke-miterlimit=\"10\" stroke-linecap=\"round\" stroke-linejoin=\"round\" />\n      <path d=\"M18 18L6 6\" stroke-width=\"1.5\" stroke-miterlimit=\"10\" stroke-linecap=\"round\" stroke-linejoin=\"round\" />\n    </svg>\n  `;\n\n  const data = [];\n  const loader = \"...\";\n  let lastId = 0;\n\n  let totalPrice = null;\n\n  // Init data\n  const initData = (id, group) => {\n    data[id] = {\n      group: group,\n      status: null,\n      prices: null,\n      lastMod: null,\n      material: null,\n      quantity: null,\n      file: null,\n      fileHash: null,\n      fileURL: null,\n      fileWidth: null,\n      fileHeight: null,\n      productPrice: null,\n      addedGroup: false,\n      valid: false,\n    };\n  };\n\n  // Listen for form group change\n  const formGroupListener = (group, id) => {\n    group.addEventListener(\"change\", () => {\n      getResult(id);\n    });\n  };\n\n  const updateGroup = (id) => {\n    totalPrice = 0;\n    data.forEach((group) => {\n      if (group === null || group.prices === null) {\n        return;\n      }\n\n      if (id && id === group.group.getAttribute(\"data-id\")) {\n        group.status.innerHTML = loader;\n      }\n\n      const materialSelect = group.group.querySelector(\".order-form-material\");\n\n      if (materialSelect.children.length == 1) {\n        materialSelect.innerHTML = \"\";\n\n        group.prices.forEach((priceData) => {\n          const option = document.createElement(\"option\");\n          option.value = priceData.material_id;\n          option.innerHTML = `${priceData.material_name}`;\n          option.setAttribute(\"data-name\", priceData.material_name);\n          materialSelect.appendChild(option);\n        });\n      }\n\n      const quantity = group.group.querySelector(\".order-form-quantity\").value;\n      const price =\n        group.prices[materialSelect.selectedIndex].unit_price * quantity +\n        group.prices[materialSelect.selectedIndex].fix_price;\n\n      setTimeout(() => {\n        group.status.innerHTML = `${Math.round(price)} RON`;\n      }, 300);\n\n      let width = Math.round(group.fileWidth);\n      let height = Math.round(group.fileHeight);\n\n      group.group.querySelector(\n        \".order-form-dimensions\"\n      ).innerHTML = `${width} x ${height} mm`;\n\n      group.productPrice =\n        group.prices[materialSelect.selectedIndex].unit_price;\n      totalPrice += price;\n      group.material =\n        materialSelect[materialSelect.selectedIndex].getAttribute(\"data-name\");\n    });\n    totalPriceElm.innerHTML = `${Math.round(totalPrice)} RON`;\n  };\n\n  // Update form group\n  const getResult = (id) => {\n    const group = data[id].group;\n    const groupFile = group.querySelector(\".order-form-file\");\n    const groupMaterial = group.querySelector(\".order-form-material\");\n    const groupQuantity = group.querySelector(\".order-form-quantity\");\n    const formStatus = group.querySelector(\".order-form-status\");\n\n    // Get material & quantity values\n    const groupMaterialValue = groupMaterial.value;\n    const groupQuantityValue = groupQuantity.value;\n\n    // Get material name\n    const groupMaterialName =\n      groupMaterial.options[groupMaterial.selectedIndex].text;\n\n    // Get file\n    let file = null;\n    if (data[id].file == null) {\n      if (!groupFile.value) {\n        formStatus.innerHTML = \"No file selected.\";\n        return;\n      }\n      file = groupFile.files[0];\n    } else {\n      file = data[id].file;\n    }\n\n    // Check if quantity is valid\n    if (groupQuantityValue < 1 || groupQuantityValue > 100) {\n      formStatus.innerHTML = \"Quantity must be between 1 and 100.\";\n      return;\n    }\n\n    const fileName = file.name;\n    const lastMod = file.lastModified + fileName;\n\n    // Set quantity\n    data[id].quantity = groupQuantityValue;\n\n    if (data[id].lastMod !== lastMod) {\n      data[id].status = formStatus;\n      data[id].material = groupMaterialValue;\n      data[id].lastMod = lastMod;\n\n      const form = new FormData();\n      form.append(\"material\", groupMaterialValue);\n      form.append(\"amount\", groupQuantityValue);\n\n      if (data[id].valid && data[id].fileHash !== null) {\n        form.append(\"hash\", data[id].fileHash);\n      } else {\n        form.append(\"dxf_file\", file, fileName);\n      }\n\n      formStatus.innerHTML = loader;\n\n      fetch(apiUrl, {\n        method: \"POST\",\n        body: form,\n      })\n        .then((response) => {\n          if (response.ok) {\n            return response.json();\n          }\n          return response.json().then((text) => {\n            throw new Error(text.message);\n          });\n        })\n        .then((result) => {\n          data[id].prices = result.prices;\n          data[id].materialPrices = result.prices;\n          data[id].fileHash = result.file_hash;\n          data[id].fileURL = result.file_path;\n          data[id].fileWidth = result.model_width;\n          data[id].fileHeight = result.model_height;\n          data[id].file = file;\n          data[id].valid = true;\n          if (!data[id].group) {\n            // add new group\n            data[id].addedGroup = true;\n          }\n          updateGroup(id);\n        })\n        .catch((error) => {\n          console.log(error);\n          formStatus.innerHTML = error;\n          data[id].lastMod = null;\n          data[id].valid = false;\n        });\n      return;\n    }\n\n    data[id].material = groupMaterialValue;\n    updateGroup(id);\n    data[id].valid = true;\n  };\n\n  const buildBlock = (id) => {\n    const newGroup = document.createElement(\"div\");\n    newGroup.classList.add(\"order-form-group\");\n    newGroup.dataset.id = `${id}`;\n\n    // Add file block\n    const fileBlock = document.createElement(\"div\");\n    fileBlock.classList.add(\"order-form-block\", \"order-form-block-file\");\n    const formMeta = document.createElement(\"div\");\n    formMeta.classList.add(\"order-form-label\");\n    formMeta.innerHTML = \"Fișier\";\n    const formBlockLabel = document.createElement(\"label\");\n    formBlockLabel.classList.add(\n      \"form-subscribe-button\",\n      \"form-subscribe-button-secondary\"\n    );\n    formBlockLabel.setAttribute(\"for\", `order-form-file-${id}`);\n    formBlockLabel.innerHTML = \"DXF File\";\n    const formBlockInput = document.createElement(\"input\");\n    formBlockInput.setAttribute(\"id\", `order-form-file-${id}`);\n    formBlockInput.classList.add(\"order-form-file\");\n    formBlockInput.setAttribute(\"type\", \"file\");\n    formBlockInput.setAttribute(\"name\", `file-${id}`);\n    formBlockInput.setAttribute(\"required\", true);\n    formBlockInput.addEventListener(\"change\", (event) => {\n      const file = event.target.files[0];\n      const fileName = file.name;\n      formBlockLabel.innerHTML = fileName;\n    });\n    fileBlock.appendChild(formMeta);\n    fileBlock.appendChild(formBlockLabel);\n    fileBlock.appendChild(formBlockInput);\n\n    // Add material block\n    const materialBlock = document.createElement(\"div\");\n    materialBlock.classList.add(\"order-form-block\", \"order-form-block-35\");\n    const materialBlockLabel = document.createElement(\"label\");\n    materialBlockLabel.classList.add(\"order-form-label\");\n    materialBlockLabel.setAttribute(\"for\", `material-${id}`);\n    materialBlockLabel.innerHTML = \"Material\";\n    const materialBlockSelect = document.createElement(\"select\");\n    materialBlockSelect.classList.add(\n      \"order-form-material\",\n      \"order-form-select\"\n    );\n    materialBlockSelect.setAttribute(\"name\", `material-${id}`);\n    // materialBlockSelect.setAttribute(\"required\", true);\n    const materialBlockSelectOption = document.createElement(\"option\");\n    materialBlockSelectOption.innerHTML = \"Choose file\";\n    materialBlockSelectOption.setAttribute(\"value\", \"\");\n    materialBlockSelect.appendChild(materialBlockSelectOption);\n    materialBlock.appendChild(materialBlockLabel);\n    materialBlock.appendChild(materialBlockSelect);\n\n    // Add quantity block\n    const quantityBlock = document.createElement(\"div\");\n    quantityBlock.setAttribute(\"required\", true);\n    quantityBlock.classList.add(\"order-form-block\", \"order-form-block-10\");\n    const quantityBlockLabel = document.createElement(\"label\");\n    quantityBlockLabel.classList.add(\"order-form-label\");\n    quantityBlockLabel.setAttribute(\"for\", `quantity-${id}`);\n    quantityBlockLabel.innerHTML = \"Cantitate\";\n    const quantityBlockInput = document.createElement(\"input\");\n    quantityBlockInput.classList.add(\n      \"order-form-quantity\",\n      \"order-form-select\"\n    );\n    quantityBlockInput.setAttribute(\"name\", `quantity-${id}`);\n    quantityBlockInput.setAttribute(\"type\", \"number\");\n    quantityBlockInput.setAttribute(\"required\", true);\n    quantityBlockInput.setAttribute(\"min\", 1);\n    quantityBlockInput.setAttribute(\"max\", 100);\n    quantityBlockInput.setAttribute(\"value\", 1);\n    quantityBlock.appendChild(quantityBlockLabel);\n    quantityBlock.appendChild(quantityBlockInput);\n\n    // Add status block\n    const statusBlock = document.createElement(\"div\");\n    statusBlock.classList.add(\"order-form-block-status\", \"order-form-block-20\");\n    const statusBlockDimensions = document.createElement(\"div\");\n    statusBlockDimensions.classList.add(\"order-form-dimensions\");\n    statusBlockDimensions.innerHTML = \"-\";\n    const statusBlockPrice = document.createElement(\"div\");\n    statusBlockPrice.classList.add(\"order-form-status\");\n    statusBlockPrice.innerHTML = \"-\";\n    statusBlock.appendChild(statusBlockDimensions);\n    statusBlock.appendChild(statusBlockPrice);\n\n    // Close button\n    const closeButtonBlock = document.createElement(\"div\");\n    closeButtonBlock.classList.add(\"order-form-close\");\n    const closeButton = document.createElement(\"button\");\n    closeButton.dataset.id = `${id}`;\n    closeButton.classList.add(\"order-form-close-button\");\n    closeButton.setAttribute(\"type\", \"button\");\n    closeButton.innerHTML = closeIcon;\n    closeButtonBlock.appendChild(closeButton);\n\n    newGroup.appendChild(fileBlock);\n    newGroup.appendChild(materialBlock);\n    newGroup.appendChild(quantityBlock);\n    newGroup.appendChild(statusBlock);\n    newGroup.appendChild(closeButtonBlock);\n\n    orderForm.insertBefore(newGroup, beforeGroup);\n\n    closeButton.addEventListener(\"click\", (event) => {\n      const id = event.currentTarget.dataset.id;\n      data[id] = null;\n      formGroup.parentNode.removeChild(newGroup);\n\n      const filterData = data.filter((item) => item !== null);\n      const lastElement = filterData.pop();\n      lastId = data.indexOf(lastElement);\n    });\n    return newGroup;\n  };\n\n  const init = () => {\n    initData(0, formGroup);\n    formGroupListener(formGroup, 0);\n    firstFileInput.addEventListener(\"change\", (event) => {\n      const file = event.target.files[0];\n      const fileName = file.name;\n      firstFileLabel.innerHTML = fileName;\n    });\n  };\n\n  init();\n\n  const addGroupHandler = () => {\n    const currentGroup = data[lastId].group;\n    const currentGroupFile = currentGroup.querySelector(\".order-form-file\");\n\n    if (!currentGroupFile.files[0]) return;\n\n    lastId++;\n    let newGroup = buildBlock(lastId);\n    initData(lastId, newGroup);\n    formGroupListener(newGroup, lastId);\n  };\n\n  // Add new group\n  addGroup.addEventListener(\"click\", () => addGroupHandler());\n\n  orderForm.addEventListener(\"submit\", async (event) => {\n    event.preventDefault();\n    const formData = new FormData(orderForm);\n\n    dataClened = data.filter((item) => item !== null);\n\n    dataClened.forEach((item, index) => {\n      if (item) {\n        const { productPrice, material } = item;\n        formData.append(`material-${index}`, material);\n        formData.append(`price-${index}`, productPrice);\n      }\n    });\n\n    try {\n      const response = await fetch(settings.root, {\n        method: \"POST\",\n        // body: JSON.parse(formData),\n        body: formData,\n        headers: {\n          // \"Content-Type\": \"application/json\",\n          \"X-WP-Nonce\": settings.nonce,\n        },\n      });\n      if (response.ok) {\n        const data = await response.json();\n        const checkoutUrl = data[\"checkout_url\"];\n        orderForm.reset();\n        location.replace(checkoutUrl);\n      } else {\n        console.log(\"Error:\", response.status);\n      }\n    } catch (error) {\n      console.log(\"Error:\", error);\n    }\n  });\n\n  orderForm.reset();\n});\n"],"names":["document","addEventListener","apiUrl","orderForm","getElementById","formGroup","querySelector","totalPriceElm","addGroup","beforeGroup","firstFileInput","firstFileLabel","closeIcon","data","loader","lastId","totalPrice","initData","id","group","status","prices","lastMod","material","quantity","file","fileHash","fileURL","fileWidth","fileHeight","productPrice","addedGroup","valid","formGroupListener","getResult","updateGroup","forEach","getAttribute","innerHTML","materialSelect","children","length","priceData","option","createElement","value","material_id","material_name","setAttribute","appendChild","price","selectedIndex","unit_price","fix_price","setTimeout","Math","round","width","height","groupFile","groupMaterial","groupQuantity","formStatus","groupMaterialValue","groupQuantityValue","groupMaterialName","options","text","files","fileName","name","lastModified","form","FormData","append","fetch","method","body","then","response","ok","json","Error","message","result","materialPrices","file_hash","file_path","model_width","model_height","catch","error","console","log","buildBlock","newGroup","classList","add","dataset","fileBlock","formMeta","formBlockLabel","formBlockInput","event","target","materialBlock","materialBlockLabel","materialBlockSelect","materialBlockSelectOption","quantityBlock","quantityBlockLabel","quantityBlockInput","statusBlock","statusBlockDimensions","statusBlockPrice","closeButtonBlock","closeButton","insertBefore","currentTarget","parentNode","removeChild","filterData","filter","item","lastElement","pop","indexOf","init","addGroupHandler","currentGroup","currentGroupFile","preventDefault","formData","dataClened","index","settings","root","headers","nonce","checkoutUrl","reset","location","replace"],"sourceRoot":""}